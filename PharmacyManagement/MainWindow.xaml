<Window x:Class="PharmacyManagement.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PharmacyManagement"
        mc:Ignorable="d"
        Title="Pharmacy Management" Height="680" Width="860"
        Background="#F0F4FF">

    <StackPanel Margin="20">
        <StackPanel Orientation="Horizontal" 
                    Margin="0,0,0,25"
                    HorizontalAlignment="Left">
            <TextBlock Text="Pharmacy" 
                       FontSize="42" 
                       FontWeight="Bold" 
                       Foreground="#4F46E5"/>
            <TextBlock Text="Management" 
                       FontSize="42" 
                       FontWeight="Medium" 
                       Foreground="#2C3E87"
                       Margin="8,0,0,0"/>
            <TextBlock x:Name="txtUser" 
                       FontSize="15" 
                       Foreground="#4A5568"
                       VerticalAlignment="Bottom"
                       Margin="30,0,0,8"/>
        </StackPanel>

        <ScrollViewer Height="380" 
                      Padding="5"
                      Background="Transparent"
                      VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="MedicinesList" Width="800">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" 
                                    Margin="0,0,0,16"
                                    Background="White"
                                    MouseDown="Edit_MouseDown">
                            <Border CornerRadius="8" 
                                    Width="230" 
                                    Height="200" 
                                    Background="#F8FAFC"
                                    Margin="0,0,20,0">
                                <Image Source="{Binding Photo}" 
                                       Width="230" 
                                       Height="200" 
                                       Stretch="UniformToFill"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                            </Border>

                            <StackPanel Width="470">
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock Text="{Binding Manufacturer}" 
                                               FontSize="18" 
                                               FontWeight="SemiBold" 
                                               Foreground="#2C3E87"/>
                                    <TextBlock Text=" | " 
                                               FontSize="18" 
                                               Foreground="#94A3B8"
                                               Margin="6,0"/>
                                    <TextBlock Text="{Binding MedicineName}" 
                                               FontSize="18" 
                                               FontWeight="SemiBold" 
                                               Foreground="#2C3E87"/>
                                </StackPanel>

                                <TextBlock Text="{Binding DosageForm, StringFormat=Форма выпуска: {0}}"  
                                           TextWrapping="Wrap" 
                                           Margin="0,0,0,8"
                                           Foreground="#4A5568"/>

                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                    <TextBlock Margin="0,0,0,8">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="По рецепту: неизвестно"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding PrescriptionRequired}" Value="True">
                                                        <Setter Property="Text" Value="По рецепту: да"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding PrescriptionRequired}" Value="False">
                                                        <Setter Property="Text" Value="По рецепту: нет"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>

                                <TextBlock Text="{Binding Price, StringFormat=Цена: {0} ₽}" 
                                           Margin="0,0,0,6"
                                           Foreground="#1E293B"
                                           FontWeight="Medium"/>
                                <TextBlock Text="{Binding Quantity, StringFormat=Остаток: {0} шт.}" 
                                           Margin="0,0,0,6"
                                           Foreground="#4A5568"/>
                                <TextBlock Text="{Binding Supplier.SupplierName, StringFormat=Поставщик: {0}}" 
                                           Foreground="#64748B"
                                           FontStyle="Italic"/>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <StackPanel x:Name="NoClient" 
                    Background="White" 
                    Margin="0,24,0,0">

            <StackPanel Orientation="Horizontal" Margin="0,0,0,18">
                <TextBlock Text="Поиск:" 
                           FontSize="15" 
                           FontWeight="Medium"
                           Foreground="#2C3E87"
                           VerticalAlignment="Center"/>
                <TextBox x:Name="txtSearch" 
                         Width="280" 
                         Height="38"
                         Margin="16,0,0,0"
                         Padding="14,8"
                         FontSize="14"
                         BorderBrush="#A5B4FC" 
                         BorderThickness="1.5"
                         Background="#F8FAFC"
                         TextChanged="txtSearch_TextChanged"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                <TextBlock Text="Сортировка по цене:" 
                           FontSize="15" 
                           FontWeight="Medium"
                           Foreground="#2C3E87"
                           VerticalAlignment="Center"/>
                <Button Content="По возрастанию" 
                        Margin="16,0,12,0" 
                        Height="38"
                        Padding="16,0"
                        FontSize="14"
                        Background="#4F46E5"
                        Foreground="White"
                        BorderThickness="0"
                        Click="Asc_Click">
                    <Button.Effect>
                        <DropShadowEffect Color="#4F46E5" BlurRadius="10" ShadowDepth="0" Opacity="0.25"/>
                    </Button.Effect>
                </Button>
                <Button Content="По убыванию" 
                        Margin="0,0,0,0" 
                        Height="38"
                        Padding="16,0"
                        FontSize="14"
                        Background="#64748B"
                        Foreground="White"
                        BorderThickness="0"
                        Click="Desc_Click"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                <TextBlock Text="Фильтр по рецепту:" 
                           FontSize="15" 
                           FontWeight="Medium"
                           Foreground="#2C3E87"
                           VerticalAlignment="Center"/>
                <ComboBox Name="ListCategory" 
                          Margin="16,0,0,0" 
                          Width="240"
                          Height="38"
                          Padding="12,6"
                          FontSize="14"
                          BorderBrush="#A5B4FC" 
                          BorderThickness="1.5"
                          Background="#F8FAFC"
                          SelectionChanged="ListCategory_SelectionChanged"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center"
                        Margin="0,8,0,0">
                <Button x:Name="NoManager" 
                        Content="Добавить лекарство" 
                        Width="220" 
                        Height="46"
                        Margin="0,0,16,0"
                        FontSize="15"
                        FontWeight="SemiBold"
                        Background="#4F46E5"
                        Foreground="White"
                        BorderThickness="0"
                        Click="AddMedicine_Click">
                    <Button.Effect>
                        <DropShadowEffect Color="#4F46E5" BlurRadius="12" ShadowDepth="0" Opacity="0.3"/>
                    </Button.Effect>
                </Button>
                <Button Content="Продажи" 
                        Width="220" 
                        Height="46"
                        FontSize="15"
                        FontWeight="SemiBold"
                        Background="#10B981"
                        Foreground="White"
                        BorderThickness="0"
                        Click="Sales_Click">
                    <Button.Effect>
                        <DropShadowEffect Color="#10B981" BlurRadius="12" ShadowDepth="0" Opacity="0.3"/>
                    </Button.Effect>
                </Button>
            </StackPanel>
        </StackPanel>
    </StackPanel>
</Window>